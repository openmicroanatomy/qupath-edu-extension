<!DOCTYPE html>
<html>
<head>
    <base href="{{qupath-resource-root}}" />
    <link rel="stylesheet" type="text/css" href="css/ckeditor.css">
</head>
<body id="content">

<p class="ckeditor--loading" style="text-align: center;font-size:30px">Loading editor ...</p>

<div class="editor" style="display: none">
    {{qupath-input}}
</div>

<!--
    For some unknown reason JavaFX WebView requires a ResizeObserver polyfill when running QuPath from the executable.
    This works fine without the Polyfill when running QuPath from the IDE.

    See also: https://stackoverflow.com/questions/69577162/javafx-webview-does-not-display-correctly-an-html-page
-->
<script src="ckeditor/ResizeObserver.js"></script>
<script src="ckeditor/ckeditor.js"></script>
<script>
    ckeditor.create(document.querySelector('.editor'), {
        licenseKey: 'GPL',
        simpleUpload: {
            uploadUrl: '{{qupath-upload-url}}',

            headers: {
                {{qupath-auth}}
            }
        },

    }).then( editor => {
        window.editor = editor;

        document.querySelector('.ckeditor--loading').style.display = "none";
    }).catch( error => {
        document.querySelector( '.ckeditor--loading' ).innerText = "Error while loading editor, please see the log for more details.";
        console.error( 'Oops, something went wrong!' );
        console.error( error );
        console.error( error.stack );
    });
</script>

</body>
</html>
